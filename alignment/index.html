<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ¯ ØªØ­Ù„ÛŒÙ„ Ù‡Ù…â€ŒØ±Ø§Ø³ØªØ§ÛŒÛŒ Ø¨Ù‡Ø¨ÙˆØ¯Ù‡Ø§ Ø¨Ø§ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ EFQM 2025</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Vazirmatn, Tahoma; background:#f6f8fb; padding:20px; color:#222; }
h1, h2 { color:#004aad; }
.card { background:#fff; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); padding:18px; margin-bottom:20px; }
button { background:#004aad; color:white; border:none; padding:10px 16px; border-radius:8px; cursor:pointer; }
button:hover { background:#003b8e; }
table { width:100%; border-collapse:collapse; margin-top:10px; font-size:14px; }
th, td { border:1px solid #e1e5eb; padding:8px; text-align:center; }
th { background:#e9f0ff; }
footer { text-align:center; margin-top:25px; color:#777; font-size:13px; }
header { display:flex; align-items:center; justify-content:space-between; margin-bottom:20px; }
header img { height:60px; }
.chart-container { width:100%; max-width:800px; margin:auto; }
</style>
</head>
<body>

<header>
  <div>
    <h1>ğŸ¯ ØªØ­Ù„ÛŒÙ„ Ù‡Ù…â€ŒØ±Ø§Ø³ØªØ§ÛŒÛŒ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯</h1>
    <p>Ù†Ù‚Ø´Ù‡ ØªØ·Ø¨ÛŒÙ‚ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø§ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ EFQM 2025</p>
  </div>
  <img src="https://github.com/hamideghtedarian/hamideghtedarian-hamideghtedarian/blob/main/logo.png?raw=true">
</header>

<div class="card">
  <h2>ğŸ“ Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§</h2>
  <input type="file" id="multiInput" multiple accept=".json">
  <p class="small">Ø³ÛŒØ³ØªÙ… Ù…Ø­ØªÙˆØ§ÛŒ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø±Ø§ Ø®ÙˆØ§Ù†Ø¯Ù‡ Ùˆ Ø¨Ø§ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ EFQM ØªØ·Ø¨ÛŒÙ‚ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p>
</div>

<div class="card">
  <h2>ğŸ“Š ØªÙˆØ²ÛŒØ¹ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§</h2>
  <div class="chart-container"><canvas id="alignChart"></canvas></div>
</div>

<div class="card">
  <h2>ğŸ“‹ Ø¬Ø¯ÙˆÙ„ ØªØ­Ù„ÛŒÙ„ Ù‡Ù…â€ŒØ±Ø§Ø³ØªØ§ÛŒÛŒ</h2>
  <div id="tableWrap">ÙØ§ÛŒÙ„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>
</div>

<div style="text-align:center;">
  <button onclick="window.print()">ğŸ–¨ï¸ Ú†Ø§Ù¾ / Ø°Ø®ÛŒØ±Ù‡ PDF</button>
</div>

<footer>
  <img src="https://github.com/hamideghtedarian/hamideghtedarian-hamideghtedarian/blob/main/banner.png?raw=true" style="max-width:250px;"><br>
  <p>Â© 2025 Hamid Eghtedarian â€” EFQM 2025 Alignment Analysis</p>
</footer>

<script>
let chart;

document.getElementById('multiInput').addEventListener('change', async e=>{
  const files=e.target.files;
  if(!files.length) return;

  const keywords={
    1:["purpose","vision","strategy","Ú†Ø´Ù…","Ø±Ø§Ù‡Ø¨Ø±Ø¯","Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ","Ù‡Ø¯Ù"],
    2:["stakeholder","customer","Ù…Ø´ØªØ±ÛŒ","Ø°ÛŒâ€ŒÙ†ÙØ¹","Ø§Ø¹ØªÙ…Ø§Ø¯","Ø§Ø±ØªØ¨Ø§Ø·"],
    3:["leader","leadership","Ø±Ù‡Ø¨Ø±ÛŒ","Ù…Ø¯ÛŒØ±","Ø§Ø±Ø²Ø´","ÙØ±Ù‡Ù†Ú¯"],
    4:["employee","Ú©Ø§Ø±Ú©Ù†","Ø¢Ù…ÙˆØ²Ø´","ØªÙˆØ§Ù†Ù…Ù†Ø¯Ø³Ø§Ø²ÛŒ","Ù…Ù†Ø§Ø¨Ø¹","Ø§Ù†Ú¯ÛŒØ²Ø´"],
    5:["process","ÙØ±Ø¢ÛŒÙ†Ø¯","Ù†ÙˆØ¢ÙˆØ±ÛŒ","Ø¯ÛŒØ¬ÛŒØªØ§Ù„","ÙÙ†Ø§ÙˆØ±ÛŒ","Ø¨Ù‡Ø¨ÙˆØ¯"],
    6:["result","performance","Ù†ØªÛŒØ¬Ù‡","Ø´Ø§Ø®Øµ","Ø§Ø«Ø±Ø¨Ø®Ø´ÛŒ"],
    7:["sustain","Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ","Ù…Ø­ÛŒØ·","Ø¬Ø§Ù…Ø¹Ù‡","Ù…Ø³Ø¦ÙˆÙ„ÛŒØª"]
  };

  const counts={1:0,2:0,3:0,4:0,5:0,6:0,7:0};
  const detailed={1:[],2:[],3:[],4:[],5:[],6:[],7:[]};

  for(const f of files){
    const text=await f.text();
    const json=JSON.parse(text);
    json.criteria.forEach(c=>{
      c.subcriteria.forEach(sc=>{
        sc.opportunities?.forEach(o=>{
          const match=findCriterion(o,keywords);
          if(match){ counts[match]++; detailed[match].push(o); }
        });
      });
    });
  }

  renderChart(counts);
  renderTable(counts,detailed);
});

/* ======= ØªØ·Ø¨ÛŒÙ‚ Ù…ØªÙ† Ø¨Ø§ Ù…Ø¹ÛŒØ§Ø± ======= */
function findCriterion(text,keywords){
  const lower=text.toLowerCase();
  for(const [cid,words] of Object.entries(keywords)){
    if(words.some(w=>lower.includes(w))) return Number(cid);
  }
  return null;
}

/* ======= Ù†Ù…ÙˆØ¯Ø§Ø± ======= */
function renderChart(counts){
  const labels=["1- Ù‡Ø¯Ù Ùˆ Ø±Ø§Ù‡Ø¨Ø±Ø¯","2- Ø°ÛŒâ€ŒÙ†ÙØ¹Ø§Ù†","3- Ø±Ù‡Ø¨Ø±ÛŒ","4- Ù†ÛŒØ±ÙˆÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ","5- ÙØ±Ø¢ÛŒÙ†Ø¯Ù‡Ø§ Ùˆ Ù†ÙˆØ¢ÙˆØ±ÛŒ","6- Ù†ØªØ§ÛŒØ¬","7- Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ"];
  const values=Object.values(counts);
  const ctx=document.getElementById('alignChart').getContext('2d');
  if(chart) chart.destroy();
  chart=new Chart(ctx,{
    type:'bar',
    data:{
      labels,
      datasets:[{label:'ØªØ¹Ø¯Ø§Ø¯ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ù…Ø±ØªØ¨Ø·',data:values,backgroundColor:'#004aad99'}]
    },
    options:{
      scales:{y:{beginAtZero:true}},
      plugins:{legend:{display:false}}
    }
  });
}

/* ======= Ø¬Ø¯ÙˆÙ„ ======= */
function renderTable(counts,detailed){
  let html='<table><tr><th>Ù…Ø¹ÛŒØ§Ø±</th><th>ØªØ¹Ø¯Ø§Ø¯</th><th>Ù†Ù…ÙˆÙ†Ù‡ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·</th></tr>';
  for(let i=1;i<=7;i++){
    html+=`<tr><td>${i}</td><td>${counts[i]}</td><td>${detailed[i].slice(0,3).join("<br>")}</td></tr>`;
  }
  html+='</table>';
  document.getElementById('tableWrap').innerHTML=html;
}
</script>
</body>
</html>
